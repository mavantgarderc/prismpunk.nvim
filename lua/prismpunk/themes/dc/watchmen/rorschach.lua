local color = require("prismpunk.utils.color")
local palette = require("prismpunk.palettes.dc.watchmen.rorschach")

local M = {}

M.get = function(opts, plt)
  plt = plt or palette
  return {
    modes = {
      normal   = plt.maskWhiteCore,
      insert   = plt.sterileGreenCore,
      visual   = plt.blotGrayCore,
      replace  = plt.bloodRedCore,
      command  = plt.coldBlueCore,
    },
    accent = {
      accent1 = plt.maskWhiteCore,
      accent2 = plt.bloodRedCore,
      accent3 = plt.justiceGrayCore,
      accent4 = plt.coldBlueCore,
      accent5 = plt.shiftingPatternCore,
      invert  = plt.bg_light,
    },
    rainbow = {
      rainbow1 = plt.maskWhiteBright,
      rainbow2 = plt.starkGrayLight,
      rainbow3 = plt.justiceGrayBright,
      rainbow4 = plt.blotGrayBright,
      rainbow5 = plt.shiftingPatternBright,
      rainbow6 = plt.coldBlueBright,
      rainbow7 = plt.bloodRedBright,
    },
    ui = {
      bg               = plt.bg_darkest,
      bg_cursorline    = plt.bg_dark,
      bg_dim           = plt.bg_darkest,
      bg_gutter        = opts.gutter and plt.bg_light or "none",
      bg_highlight     = plt.bg_mid,
      bg_m1            = plt.bg_darker,
      bg_m2            = plt.bg_dark,
      bg_m3            = plt.bg_mid,
      bg_m4            = plt.bg_light,
      bg_p1            = plt.bg_dark,
      bg_p2            = plt.bg_mid,
      bg_statusline    = plt.bg_light,
      bg_visual        = plt.bg_mid,
      border           = plt.justiceGray,
      cursorline       = plt.bg_dark,
      fg               = plt.fg_lightest,
      fg_dim           = plt.fg_light,
      fg_reverse       = plt.bg_alt1,
      indent           = plt.bg_lighter,
      indent_scope     = plt.shiftingPatternCore,
      line_nr          = plt.bg_lightest,
      line_nr_active   = plt.fg_lightest,
      line_nr_dim      = plt.bg_lighter,
      nontext          = plt.bg_lightest,
      selection        = plt.bg_mid,
      win_separator    = plt.justiceGray,
      float = {
        bg        = plt.bg_darker,
        bg_border = plt.bg_darker,
        fg        = plt.fg_light,
        fg_border = plt.justiceGray,
      },
      pmenu = {
        bg        = plt.bg_light,
        bg_border = plt.bg_light,
        bg_sbar   = plt.bg_light,
        bg_sel    = plt.bg_lighter,
        bg_thumb  = plt.starkGray,
        fg        = plt.fg_light,
        fg_sel    = plt.fg_lightest,
      },
      tabline = {
        bg           = plt.bg_darkest,
        bg_inactive  = plt.bg_darkest,
        bg_selected  = plt.bg_dark,
        fg_inactive  = plt.fg_dark,
        fg_selected  = plt.fg_lightest,
      },
    },
    syn = {
      attribute   = plt.starkGray,
      boolean     = plt.coldBlueCore,
      comment     = plt.justiceGray,
      constant    = plt.maskWhiteCore,
      deprecated  = plt.voidGray,
      func        = plt.fg_lightest,
      identifier  = plt.fg_light,
      keyword     = plt.shiftingPatternCore,
      method      = plt.fg_lightest,
      number      = plt.maskWhiteCore,
      operator    = plt.starkGray,
      parameter   = plt.fg_mid,
      preproc     = plt.coldBlueCore,
      punct       = plt.fg_dark,
      regex       = plt.blotGrayCore,
      special     = plt.coldBlueCore,
      statement   = plt.shiftingPatternCore,
      string      = plt.fg_light,
      symbol      = plt.starkGray,
      type        = plt.coldBlueCore,
      variable    = plt.fg_light,
    },
    diag = {
      error   = plt.errorRed,
      warning = plt.warningAmber,
      info    = plt.infoBlue,
      ok      = plt.successGreen,
      hint    = plt.coldBlueCore,
    },
    diff = {
      add     = plt.sterileGreenCore,
      change  = plt.starkGray,
      delete  = plt.bloodRedCore,
      text    = plt.coldBlueCore,
    },
    vcs = {
      added   = plt.sterileGreenCore,
      changed = plt.starkGray,
      removed = plt.bloodRedCore,
    },
    term = {
      black           = plt.inkBlackCore,
      red             = plt.bloodRedCore,
      green           = plt.sterileGreenCore,
      yellow          = plt.warningAmber,
      blue            = plt.coldBlueCore,
      magenta         = plt.shiftingPatternCore,
      cyan            = plt.blotGrayCore,
      white           = plt.maskWhiteCore,
      black_bright    = color(plt.inkBlackBright):brighten(0.3):to_hex(),
      red_bright      = color(plt.bloodRedBright):brighten(0.2):to_hex(),
      green_bright    = color(plt.sterileGreenBright):brighten(0.2):to_hex(),
      yellow_bright   = color(plt.warningAmber):brighten(0.3):to_hex(),
      blue_bright     = color(plt.coldBlueBright):brighten(0.2):to_hex(),
      magenta_bright  = color(plt.shiftingPatternBright):brighten(0.3):to_hex(),
      cyan_bright     = color(plt.blotGrayBright):brighten(0.3):to_hex(),
      white_bright    = plt.maskWhiteBright,
    },
  }
end

return {
  name = "Watchmen – Rorschach",
  author = "PrismPunk.nvim",
  description = "Black and white morality — no compromise, absolute justice, shifting ink patterns.",
  base16 = {
    base00 = palette.bg_darkest,
    base01 = palette.bg_darker,
    base02 = palette.bg_dark,
    base03 = palette.justiceGrayCore,
    base04 = palette.starkGray,
    base05 = palette.fg_mid,
    base06 = palette.fg_light,
    base07 = palette.fg_lightest,
    base08 = palette.bloodRedCore,
    base09 = palette.warningAmber,
    base0A = palette.starkGray,
    base0B = palette.sterileGreenCore,
    base0C = palette.blotGrayCore,
    base0D = palette.coldBlueCore,
    base0E = palette.shiftingPatternCore,
    base0F = palette.maskWhiteCore,
  },
  palette = palette,
  get = M.get,
}
